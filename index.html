<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ramo de Tulipanes — Experiencia Interactiva</title>
  <meta name="description" content="Ramo interactivo de 5 tulipanes palo-rosa. Haz clic en cada flor para ver un mensaje." />
  <style>
    /* -------------------
       VARIABLES (fácil edición)
       ------------------- */
    :root{
      --perla: #f7f5f2;       /* color de fondo perla */
      --destello: rgba(255,255,255,0.85);
      --accent: #ff7ab6;     /* color acento palo rosa */
      --text: #2c2c2c;
      --blur-strength: 6px;
      --tulip-width: 140px;
      --page-padding: 20px;
      --max-width: 1100px;
      --shadow: 0 12px 30px rgba(0,0,0,0.12);
      --radius: 14px;
    }

    /* Reset y layout */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;}
    body{background:var(--perla);display:flex;align-items:center;justify-content:center;padding:var(--page-padding);overflow:hidden;color:var(--text)}

    /* Área principal (stage) que contendrá shimmer + ramo */
    #stage{position:relative;width:100%;max-width:var(--max-width);height:86vh;border-radius:20px;background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.25));box-shadow:var(--shadow);display:flex;align-items:center;justify-content:center;overflow:hidden}

    /* SHIMMER (destellos blancos suaves que se mueven) */
    .shimmer{
      position:absolute;inset:0;pointer-events:none;z-index:2;
      background-image:
        radial-gradient(ellipse at 20% 20%, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.0) 18%),
        radial-gradient(ellipse at 80% 80%, rgba(255,255,255,0.85) 0%, rgba(255,255,255,0.0) 20%);
      opacity:0.8;mix-blend-mode:screen;filter:blur(6px);
      animation: shimmerMove 9s linear infinite;
    }
    @keyframes shimmerMove{
      0%{transform:translate(-4%, -3%) scale(1)}
      50%{transform:translate(4%, 3%) scale(1.05)}
      100%{transform:translate(-4%, -3%) scale(1)}
    }

    /* Ramo central - contenedor flexible para las 5 flores */
    .ramo{
      position:relative;z-index:10;display:flex;align-items:flex-end;gap:18px;transform:translateY(6%);
      pointer-events:auto;
    }

    /* Cada tulipán envuelto en .tulip-wrap para permitir offsets orgánicos */
    .tulip-wrap{width:var(--tulip-width);display:flex;align-items:flex-end;justify-content:center;transform-origin:50% 100%}
    .tulip{
      width:100%;height:auto;display:block;border-radius:12px;cursor:pointer;user-select:none;
      transform-origin:50% 100%;box-shadow:0 10px 28px rgba(0,0,0,0.12);
      transition:transform .26s cubic-bezier(.2,.9,.3,1), filter .18s;
      will-change:transform, filter;
    }
    .tulip:active{transform:translateY(6px) scale(.98)}

    /* Entrada suave y stagger usando nth-child */
    .tulip-wrap{opacity:0;transform:translateY(18px) scale(.95)}
    .tulip-wrap:nth-child(1){animation:popIn .7s .05s both cubic-bezier(.2,.9,.3,1)}
    .tulip-wrap:nth-child(2){animation:popIn .7s .12s both cubic-bezier(.2,.9,.3,1)}
    .tulip-wrap:nth-child(3){animation:popIn .7s .19s both cubic-bezier(.2,.9,.3,1)}
    .tulip-wrap:nth-child(4){animation:popIn .7s .26s both cubic-bezier(.2,.9,.3,1)}
    .tulip-wrap:nth-child(5){animation:popIn .7s .33s both cubic-bezier(.2,.9,.3,1)}

    @keyframes popIn{
      0%{opacity:0;transform:translateY(18px) scale(.95)}
      60%{opacity:1;transform:translateY(-6px) scale(1.03)}
      100%{opacity:1;transform:translateY(0) scale(1)}
    }

    /* Posiciones orgánicas (rotaciones / offsets) */
    .tulip-wrap.pos1{transform:translateY(12px) rotate(-8deg) scale(.98)}
    .tulip-wrap.pos2{transform:translateY(6px) rotate(6deg) scale(.95)}
    .tulip-wrap.pos3{transform:translateY(0px) rotate(-2deg) scale(1.08)}
    .tulip-wrap.pos4{transform:translateY(6px) rotate(10deg) scale(.96)}
    .tulip-wrap.pos5{transform:translateY(10px) rotate(-4deg) scale(.97)}

    /* sombra de base tipo ramo */
    .ramo:after{
      content:'';position:absolute;bottom:8%;left:50%;transform:translateX(-50%);width:56%;height:18px;background:radial-gradient(ellipse at center, rgba(0,0,0,0.12), rgba(0,0,0,0.0));border-radius:50%;z-index:1;
    }

    /* Modal emergente centrada */
    .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.36);z-index:60;padding:20px}
    .overlay.show{display:flex}
    .dialog{background:#fff;width:100%;max-width:520px;border-radius:12px;padding:20px;box-shadow:0 16px 40px rgba(0,0,0,0.22);text-align:center}
    .dialog h2{margin:6px 0 10px;color:var(--accent);font-size:20px}
    .dialog p{margin:0 0 16px;color:var(--text);line-height:1.4}
    .dialog .actions{display:flex;gap:8px;justify-content:center}
    .btn{border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.prim{background:var(--accent);color:white}
    .btn.sec{background:transparent;border:2px solid rgba(0,0,0,0.06);color:var(--text)}

    /* Blur effect applied to stage when modal open */
    .blurred{filter:blur(var(--blur-strength));transition:filter .24s;pointer-events:none;opacity:.98}

    /* Top-right audio control */
    .audio-control{position:absolute;top:14px;right:16px;z-index:80;display:flex;align-items:center;gap:8px;background:rgba(255,255,255,0.7);backdrop-filter:blur(6px);padding:8px 10px;border-radius:999px;box-shadow:0 8px 20px rgba(0,0,0,0.08)}
    .audio-control button{border:none;background:none;cursor:pointer;font-weight:700;color:var(--accent)}

    /* Small footer note inside stage */
    .note{position:absolute;left:18px;bottom:14px;font-size:13px;color:#666;z-index:80}

    /* Responsive tweaks */
    @media (max-width:720px){
      :root{--tulip-width:100px}
      .ramo{gap:10px;transform:translateY(10%) scale(.92}
      .dialog{padding:16px}
    }
  </style>
</head>
<body>
  <!-- STAGE: shimmer + ramo -->
  <div id="stage" role="main" aria-label="Ramo de tulipanes interactivo">
    <div class="shimmer" aria-hidden="true"></div>

    <!-- Audio control (visual) -->
    <div class="audio-control" id="audioControl" aria-hidden="false" title="Control de música">
      <button id="playBtn" aria-label="Reproducir/pausar">▶︎</button>
      <span style="font-size:13px;color:#333">Música</span>
    </div>

    <!-- Ramo central -->
    <div class="ramo" id="ramo" aria-hidden="false">
      <!-- cada tulipán se puede editar en la lista TULIP_URLS dentro del script -->
      <div class="tulip-wrap pos1"><img class="tulip" src="https://images.unsplash.com/photo-1504198453319-5ce911bafcde?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=" alt="Tulipán 1" data-index="0"></div>
      <div class="tulip-wrap pos2"><img class="tulip" src="https://images.unsplash.com/photo-1528825871115-3581a5387919?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=" alt="Tulipán 2" data-index="1"></div>
      <div class="tulip-wrap pos3"><img class="tulip" src="https://images.unsplash.com/photo-1514996937319-344454492b37?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=" alt="Tulipán 3" data-index="2"></div>
      <div class="tulip-wrap pos4"><img class="tulip" src="https://images.unsplash.com/photo-1470770903676-69b98201ea1c?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=" alt="Tulipán 4" data-index="3"></div>
      <div class="tulip-wrap pos5"><img class="tulip" src="https://images.unsplash.com/photo-1495400553232-4a078a3aef47?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=" alt="Tulipán 5" data-index="4"></div>
    </div>

    <div class="note">Haz clic en cada tulipán para ver su mensaje.</div>
  </div>

  <!-- MODAL / OVERLAY -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="dialog" id="dialog">
      <h2 id="dialogTitle">Título editable</h2>
      <p id="dialogText">Texto editable por flor.</p>
      <div class="actions">
        <button class="btn sec" id="closeBtn">Cerrar</button>
        <button class="btn prim" id="nextBtn">Siguiente</button>
      </div>
    </div>
  </div>

  <!-- Script: editar las constantes MESSAGES y TULIP_URLS abajo para personalizar -->
  <script>
    /* -------------------------
       CONFIGURACIÓN: Edita aquí
       ------------------------- */
    // Mensajes por cada tulipán (5 objetos)
    const MESSAGES = [
      { title: 'Tulipán 1', text: 'Mensaje 1 — reemplaza este texto por tu mensaje.' },
      { title: 'Tulipán 2', text: 'Mensaje 2 — reemplaza este texto por tu mensaje.' },
      { title: 'Tulipán 3', text: 'Mensaje 3 — reemplaza este texto por tu mensaje.' },
      { title: 'Tulipán 4', text: 'Mensaje 4 — reemplaza este texto por tu mensaje.' },
      { title: 'Tulipán 5', text: 'Mensaje 5 — reemplaza este texto por tu mensaje.' }
    ];

    // URLs de las imágenes de tulipanes (si quieres usar imágenes locales, pon el nombre del archivo aquí y súbelo al mismo folder)
    const TULIP_URLS = [
      'https://images.unsplash.com/photo-1504198453319-5ce911bafcde?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=',
      'https://images.unsplash.com/photo-1528825871115-3581a5387919?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=',
      'https://images.unsplash.com/photo-1514996937319-344454492b37?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=',
      'https://images.unsplash.com/photo-1470770903676-69b98201ea1c?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=',
      'https://images.unsplash.com/photo-1495400553232-4a078a3aef47?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s='
    ];

    // URL del MP3 (usa el link de Google Drive en formato descarga directa o sube el mp3 al mismo repo y pon 'miAudio.mp3')
    const AUDIO_SRC = 'https://docs.google.com/uc?export=download&id=1VKw9AfTziD_mw7kVuIvX4eybVG-e9daG';

    /* -------------------------
       LÓGICA (no es necesario editar)
       ------------------------- */
    const ramo = document.getElementById('ramo');
    const tulips = document.querySelectorAll('.tulip');
    const overlay = document.getElementById('overlay');
    const dialogTitle = document.getElementById('dialogTitle');
    const dialogText = document.getElementById('dialogText');
    const closeBtn = document.getElementById('closeBtn');
    const nextBtn = document.getElementById('nextBtn');
    const stage = document.getElementById('stage');
    const playBtn = document.getElementById('playBtn');
    const audioControl = document.getElementById('audioControl');

    // Aplicar las imágenes desde la lista (fácil reemplazo)
    function applyTulipImages(){
      const imgs = document.querySelectorAll('.tulip');
      imgs.forEach((img, i) => {
        img.src = TULIP_URLS[i % TULIP_URLS.length];
      });
    }
    applyTulipImages();

    // Preparar audio
    let audio = new Audio(AUDIO_SRC);
    audio.loop = true;
    audio.preload = 'auto';
    let audioStarted = false;

    function tryPlayAudio(){
      audio.play().then(()=>{
        audioStarted = true;
        playBtn.textContent = '⏸';
      }).catch(e=>{
        // autoplay fue bloqueado por el navegador; mostrar control al usuario
        audioStarted = false;
        playBtn.textContent = '▶︎';
        console.warn('Autoplay bloqueado. El usuario debe iniciar audio manualmente.');
      });
    }

    // Intentamos reproducir cuando la página carga
    window.addEventListener('load', ()=>{
      tryPlayAudio();
    });

    // Play / Pause toggle
    playBtn.addEventListener('click', ()=>{
      if(!audioStarted){
        audio.play().then(()=>{ audioStarted=true; playBtn.textContent='⏸' }).catch(()=>{ audioStarted=false; alert('Reproducción bloqueada; intenta interactuar con la página antes.') });
      } else {
        audio.pause(); audioStarted=false; playBtn.textContent='▶︎';
      }
    });

    // Abrir modal con mensaje según índice y aplicar blur al fondo
    let currentIndex = 0;
    function openModal(i){
      currentIndex = i;
      dialogTitle.textContent = MESSAGES[i].title;
      dialogText.textContent = MESSAGES[i].text;
      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
      stage.classList.add('blurred');
    }
    function closeModal(){
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
      stage.classList.remove('blurred');
    }

    // Asignar click a cada tulipán
    tulips.forEach(t => {
      t.addEventListener('click', (ev) => {
        const idx = Number(t.dataset.index || t.getAttribute('data-index') || 0);
        openModal(idx);
        // si audio no ha iniciado, iniciar ahora (mejora UX: tocar flor inicia sonido)
        if(!audioStarted){
          audio.play().then(()=>{ audioStarted=true; playBtn.textContent='⏸' }).catch(()=>{});
        }
      });
    });

    closeBtn.addEventListener('click', closeModal);
    nextBtn.addEventListener('click', ()=>{ currentIndex = (currentIndex + 1) % MESSAGES.length; openModal(currentIndex); });

    // Cerrar modal al hacer click fuera de la caja
    overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeModal(); });

    /* --------------------------------------------------
       Nota sobre hosting de audio desde Google Drive:
       - Preferible: subir el mp3 al mismo repo (ej: 'miAudio.mp3') y poner AUDIO_SRC='miAudio.mp3'.
       - Google Drive puede devolver headers que impidan carga directa en algunos hosts (CORS). Si el audio no carga en GitHub Pages, sube el mp3 al repo.
       -------------------------------------------------- */
  </script>
</body>
</html>
